<?php
$data = array(
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "RPL: IMPLEMENTASI DAN PENGUJIAN PLRPL: IMPLEMENTASI DAN PENGUJIAN", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Belum Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENDIDIKAN KARAKTER", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Belum Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Belum Diambil"),    
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Belum Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Belum Diambil"),
);

$data_mk_repeat = array(
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "RPL: IMPLEMENTASI DAN PENGUJIAN PLRPL: IMPLEMENTASI DAN PENGUJIAN", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "E", "Status" => "Sudah Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENDIDIKAN KARAKTER", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "E", "Status" => "Sudah Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "E", "Status" => "Sudah Diambil"),    
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "E", "Status" => "Sudah Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "WAJIB PRODI", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "E", "Status" => "Sudah Diambil"),
);

$data_mkpil_repeat = array(
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "RPL: IMPLEMENTASI DAN PENGUJIAN PLRPL: IMPLEMENTASI DAN PENGUJIAN", "SKS" => 2, "Jenis" => "PILIHAN", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Sudah Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENDIDIKAN KARAKTER", "SKS" => 2, "Jenis" => "PILIHAN", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Sudah Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "PILIHAN", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Sudah Diambil"),    
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "PILIHAN", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Sudah Diambil"),
    array("kode_matkul" => "UKB1B2", "Nama_matkul" => "PENGENALAN PEMROGRAMAN", "SKS" => 2, "Jenis" => "PILIHAN", "Tahun_Kurikulum" => "2020", "Tingkat" => "TINGKAT 1", "Tahun_Ajaran" => "2022/2023", "Semester" => "1", "Nilai_Indeks" => "-", "Status" => "Sudah Diambil"),
);
?>

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Main Dashboard</title>
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="{{asset('css/style.css')}}">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<body>

	<div class="container-fluid">
		<div class="row">
			<div class="col-md-3 ghost-col"></div>
			<div class="col-md-3 sidebar">
				<div class="telu"></div>
				<ul>
					<li>
						<a href="{{ route('main_dashboard') }}">
							<i class="fa-solid fa-chart-simple"></i><span>Dashboard</span>
						</a>
					</li>
					<li class="active">
						<a href="{{ route('mahasiswa_wali') }}">
							<i class="fa-solid fa-user-group active-icon"></i><span>Mahasiswa Wali</span>
						</a>
					</li>
					<li>
						<a href="{{ route('mahasiswa_mengulang') }}">
							<i class="fa-solid fa-repeat"></i><span>Mahasiswa Mengulang</span>
						</a>
					</li>
					<li>
						<a href="{{ route('mahasiswa_watchList') }}">
							<i class="fa-regular fa-eye"></i><span>Mahasiswa Watchlist</span>
						</a>
					</li>
					<li class="account">
						<div class="col-md-2 profile"></div>
						<div class="col profile-name">
							<h6>Erzy irvine</h6>
							<span>ERJ</span>
						</div>
						<div class="col-md-2 logout">
							<a href="{{ route('login_page') }}">
								<i class="fa-solid fa-arrow-right-from-bracket"></i>
							</a>
						</div>
					</li>
				</ul>
			</div>
			<div class="col content">
				<div class="row">
					<div class="col-md-12 breadcrumbs">
						<h3>Mahasiswa wali > profile</h3>
					</div>
					<div class="col-md-12 rangkuman">
						<h6>Mahasiswa Ini Belum Melengkapi</h6>
						<div class="problem">
							<p>- Ada mata kuliah wajib yang belum diambil</p>
							<a href="#mk-wajib">Lihat</a>
						</div>
						<div class="problem">
							<p>- Ada mata kuliah wajib yang perlu diulang</p>
							<a href="#mk-ulang">Lihat</a>
						</div>
						<div class="problem">
							<p>- Ada mata kuliah pilihan yang belum diambil</p>
							<span>2/3</span>
							<a href="#mk-pilihan">Lihat</a>
						</div>
						<div class="problem">
							<p>- Nilai Eprt belum mencukupi</p>
							<a href="#eprt">Lihat</a>
						</div>
						<div class="problem">
							<p>- SKS </p>
							<span>135 / 140</span>
						</div>
						<div class="problem">
							<p>- TAK </p>
							<span>35 / 60</span>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12 breadcrumbs profile-pin">
						<h3>profile mahasiswa</h3>
						<a href="#" id="watchlist-btn" class="btn btn-warning">masukan ke watchlist</a>
					</div>
					<div class="col info-mhs">
						<div class="col-md-3 mhs-pfp"></div>
						<div class="col-md-3 info-container">
							<p><b>NIM : </b> 1301204022</p>
							<p><b>Nama : </b> Erzy Irvine julian</p>
							<p><b>Kelas : </b> IF-44-06</p>
							<p><b>Tingkat : </b> III</p>
						</div>
						<div class="col info-container">
							<p><b>Program Studi : </b> Informatika</p>
							<p><b>Tahun Angkatan : </b> 2020</p>
							<p><b>IPK : </b> 3.83</p>
							<p><b>SKS Total : </b> 137</p>
						</div>
						<div class="col-md-3 status-mhs">
							<h5>Status</h5>
							<span class="badge bg-success">Mahasiswa Aktif</span>
						</div>
					</div>
					
				</div>
				<div class="row">
					<div class="col-md-4 widget-kehadiran">
						<h3>Kehadiran Mahasiswa</h3>
						<input class="form-control filter-matkul" list="datalistOptions" id="exampleDataList" placeholder="Cari matkul">
						<datalist id="datalistOptions">
						  <option value="Matematika diskrit">
						  <option value="Kalkulus">
						  <option value="Pancasila">
						  <option value="Kewarganegaraan">
						  <option value="Pendidikan agama islam">
						</datalist>
						<canvas id="kehadiran"></canvas>
					</div>
					<div class="col widget-ipk">
						<h3>IPS Mahasiswa</h3>
						<canvas id="nilai"></canvas>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12 breadcrumbs">
						<h3>Daftar Mata Kuliah Mahasiswa</h3>
					</div>
					<div class="col info-mhs">
						<div class="col-md-3 info-container">
							<p><b>Tingkat I : </b> 38 SKS</p>
							<p><b>Tingkat II : </b> 38 SKS</p>
							<p><b>Tingkat III : </b> 40 SKS</p>
							<p><b>Tingkat IV : </b> 21 SKS</p>
						</div>
						<div class="col info-container">
							<p><b>Lulus tanggal 25-02-2022: </b> IP : 3.88</p>
							<p><b>Belum lulus </b> IP : 3.88</p>
							<p><b>Belum lulus </b> IP : 3.88</p>
							<p><b>Belum lulus </b> IP : 3.88</p>
						</div>
						<div class="col-md-3 daftar-mhs"  id="eprt">
							<div class="nilai-extra">
								<h5>Eprt</h5>
								<span class="badge bg-success">600</span>
							</div>
							<div class="nilai-extra">
								<h5>TAK</h5>
								<span class="badge bg-success">30</span>
							</div>
							
						</div>
					</div>
					
				</div>
				<div class="row">
					<div class="col-md-12 matkul-uncheck" id="mk-wajib">
						<div class="col widget-checkup">
							<div class="col-md-12 top-part">
								<h3>Mata Kuliah Wajib Belum Diambil<i title="Menampilkan Mata kuliah yang belum diambil
									di tingkat setara dan sebelumnya" class="fa-solid fa-circle-info"></i></h3>
								</div>
								<table class="table">
									<thead>
										<tr>
											<th scope="col">No</th>
											<th>Kode Mata Kuliah</th>
											<th>Nama Mata Kuliah</th>
											<th>SKS</th>
											<th>Jenis</th>
											<th>Tahun Kurikulum</th>
											<th>Tingkat</th>
											<th>Tahun Ajaran</th>
											<th>Semester</th>
											<th>Nilai Indeks</th>
											<th>Status</th>
										</tr>
									</thead>
									<tbody>
										<?php 
										$i = 1;
										foreach($data as $row) : 

											?>
											<tr class="table-text">
												<td scope="row"><?php echo $i++ ?></td>
												<td><?php echo $row["kode_matkul"] ?></td>
												<td><?php echo $row["Nama_matkul"] ?></td>
												<td><?php echo $row["SKS"] ?></td>
												<td><?php echo $row["Jenis"] ?></td>
												<td><?php echo $row["Tahun_Kurikulum"] ?></td>
												<td><?php echo $row["Tingkat"] ?></td>
												<td><?php echo $row["Tahun_Ajaran"] ?></td>
												<td><?php echo $row["Semester"] ?></td>
												<td><?php echo $row["Nilai_Indeks"] ?></td>
												<td><?php echo $row["Status"] ?></td>
											</td>
										</tr>
									<?php endforeach; ?>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-12 matkul-uncheck" id="mk-ulang">
						<div class="col widget-checkup">
							<div class="col-md-12 top-part">
								<h3>Mata kuliah Wajib Mengulang</h3>
								</div>
								<table class="table">
									<thead>
										<tr>
											<th scope="col">No</th>
											<th>Kode Mata Kuliah</th>
											<th>Nama Mata Kuliah</th>
											<th>SKS</th>
											<th>Jenis</th>
											<th>Tahun Kurikulum</th>
											<th>Tingkat</th>
											<th>Tahun Ajaran</th>
											<th>Semester</th>
											<th>Nilai Indeks</th>
											<th>Status</th>
										</tr>
									</thead>
									<tbody>
										<?php 
										$i = 1;
										foreach($data_mk_repeat as $row) : 

											?>
											<tr class="table-text">
												<td scope="row"><?php echo $i++ ?></td>
												<td><?php echo $row["kode_matkul"] ?></td>
												<td><?php echo $row["Nama_matkul"] ?></td>
												<td><?php echo $row["SKS"] ?></td>
												<td><?php echo $row["Jenis"] ?></td>
												<td><?php echo $row["Tahun_Kurikulum"] ?></td>
												<td><?php echo $row["Tingkat"] ?></td>
												<td><?php echo $row["Tahun_Ajaran"] ?></td>
												<td><?php echo $row["Semester"] ?></td>
												<td><?php echo $row["Nilai_Indeks"] ?></td>
												<td><?php echo $row["Status"] ?></td>
											</td>
										</tr>
									<?php endforeach; ?>
								</tbody>
							</table>
						</div>
					</div>
				</div>

				
				<div class="row">
					<div class="col-md-12 matkul-uncheck" id="mk-pilihan">
						<div class="col widget-checkup">
							<div class="col-md-12 top-part">
								<h3>Mata kuliah pilihan belum diambil</h3>
								</div>
								<table class="table">
									<thead>
										<tr>
											<th scope="col">No</th>
											<th>Kode Mata Kuliah</th>
											<th>Nama Mata Kuliah</th>
											<th>SKS</th>
											<th>Jenis</th>
											<th>Tahun Kurikulum</th>
											<th>Tingkat</th>
											<th>Tahun Ajaran</th>
											<th>Semester</th>
											<th>Nilai Indeks</th>
											<th>Status</th>
										</tr>
									</thead>
									<tbody>
										<?php 
										$i = 1;
										foreach($data_mkpil_repeat as $row) : 

											?>
											<tr class="table-text">
												<td scope="row"><?php echo $i++ ?></td>
												<td><?php echo $row["kode_matkul"] ?></td>
												<td><?php echo $row["Nama_matkul"] ?></td>
												<td><?php echo $row["SKS"] ?></td>
												<td><?php echo $row["Jenis"] ?></td>
												<td><?php echo $row["Tahun_Kurikulum"] ?></td>
												<td><?php echo $row["Tingkat"] ?></td>
												<td><?php echo $row["Tahun_Ajaran"] ?></td>
												<td><?php echo $row["Semester"] ?></td>
												<td><?php echo $row["Nilai_Indeks"] ?></td>
												<td><?php echo $row["Status"] ?></td>
											</td>
										</tr>
									<?php endforeach; ?>
								</tbody>
							</table>
						</div>
					</div>
				</div>


			<div class="row">
					<div class="col footer"></div>
				</div>
		</div>
	</div>

	<div id="notification" class="notification"></div>

</body>
<script type="text/javascript">

	const bar = document.getElementById('nilai');

  	new Chart(bar, {
    type: 'bar',
    data: {
      labels: ['2021/1 (smt 1)', '2021/2 (smt 2)', '2122/1 (smt 3)', '2122/2 (smt 4)', '2223/1 (smt 5)', '2223/2 (smt 6)', '2324/1 (smt 7)', '2324/2 (smt 8)'],
      datasets: [{
        label: 'IPK',
        data: [3.90, 3.80, 3.70, 3.40, 3.50, 3.62, 3.46, 3.65],
        backgroundColor: [
	      'rgba(75, 192, 192, 0.2)',
	      'rgba(75, 192, 192, 0.2)',
	      'rgba(75, 192, 192, 0.2)',
	      'rgba(75, 192, 192, 0.2)',
	      'rgba(75, 192, 192, 0.2)',
	      'rgba(75, 192, 192, 0.2)',
	      'rgba(75, 192, 192, 0.2)',
	      'rgba(75, 192, 192, 0.2)',
    	],
    	borderColor: [
      'rgb(75, 192, 192)',
      'rgb(75, 192, 192)',
      'rgb(75, 192, 192)',
      'rgb(75, 192, 192)',
      'rgb(75, 192, 192)',
      'rgb(75, 192, 192)',
      'rgb(75, 192, 192)',
      'rgb(75, 192, 192)',
    ],
    borderWidth: 1
      }]
    },
  });

  document.getElementById('watchlist-btn').addEventListener('click', function() {
		const btn = document.getElementById('watchlist-btn');
		const notification = document.getElementById('notification');
		const isAdded = btn.textContent === 'sudah ditambahkan';

		if (isAdded) {
			btn.textContent = 'masukan ke watchlist';
			notification.textContent = 'berhasil dihapus dari watchList';
			notification.classList.remove('success');
			notification.classList.add('error');
		} else {
			btn.textContent = 'sudah ditambahkan';
			notification.textContent = 'berhasil ditambahkan ke watchList';
			notification.classList.remove('error');
			notification.classList.add('success');
		}

		notification.style.display = 'block';

		setTimeout(function() {
			notification.style.display = 'none';
		}, 3000);
	});

	const pie = document.getElementById('kehadiran');

    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function updatePieChart(chart, data) {
        chart.data.datasets[0].data = data;
        chart.update();
    }

    const kehadiranChart = new Chart(pie, {
        type: 'pie',
        data: {
            labels: ['Hadir', 'Sakit', 'Izin', 'Tidak Hadir'],
            datasets: [{
                label: 'Kehadiran',
                data: [getRandomInt(100, 400), getRandomInt(10, 30), getRandomInt(10, 30), getRandomInt(30, 50)],
                backgroundColor: [
                    'rgb(134,228,186)',
                    'rgb(255, 99, 132)',
                    'rgb(255, 205, 86)',
                    'rgb(54, 162, 235)'
                ],
                hoverOffset: 4
            }]
        },
    });

    const filterMatkul = document.querySelector('.filter-matkul');
    filterMatkul.addEventListener('input', function() {
        const value = filterMatkul.value.trim();
        if (value) {
            updatePieChart(kehadiranChart, [getRandomInt(1, 16), getRandomInt(1, 16), getRandomInt(1, 16), getRandomInt(1, 16)]);
        } else {
            updatePieChart(kehadiranChart, [getRandomInt(100, 400), getRandomInt(10, 30), getRandomInt(10, 30), getRandomInt(30, 50)]);
        }
    });
	
</script>

</html>